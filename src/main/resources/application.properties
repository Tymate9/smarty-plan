quarkus.live-reload.instrumentation=true
%test.quarkus.class-loading.parent-first-artifacts=io.qameta.allure:allure-java-commons
%functional.quarkus.class-loading.parent-first-artifacts=io.qameta.allure:allure-java-commons

quarkus.default-locale=fr_FR

# ======================================================================================================================
# Http Configuration
# ======================================================================================================================

quarkus.http.port=8080
%test.quarkus.http.port=8081
%functional.quarkus.http.port=8081

# ======================================================================================================================
# Database Configuration
# ======================================================================================================================

quarkus.datasource.db-kind=postgresql

# Liquibase
# - - - - -
quarkus.liquibase.migrate-at-start=true
quarkus.liquibase.database-change-log-lock-table-name=database-changelog-lock
quarkus.liquibase.database-change-log-table-name=database-changelog

# Prod
%prod.quarkus.liquibase.contexts=prod
# Dev
%dev.quarkus.liquibase.contexts=dev
%dev.quarkus.liquibase.clean-at-start=true
# Test
%test.quarkus.liquibase.contexts=test
%test.quarkus.datasource.devservices.reuse=false

# ======================================================================================================================
#   Openapi
# ======================================================================================================================

# quarkus.swagger-ui.always-include=true
# quarkus.swagger-ui.path=/api/docs
# quarkus.smallrye-openapi.enable=true
# quarkus.smallrye-openapi.info-title=Smarty Plan API
# quarkus.smallrye-openapi.info-description=Rest API of the Smarty Plan platform
# quarkus.smallrye-openapi.info-version=1.0
#
# ##  Dev
# %dev.quarkus.smallrye-openapi.info-title=Smarty Plan API (Dev)
# ##  Test
# %test.quarkus.smallrye-openapi.info-title=Smarty Plan API (Test)

# ======================================================================================================================
#   Access Logs
# ======================================================================================================================
quarkus.http.access-log.enabled=true

# ======================================================================================================================
# KeyCloak Configuration
# ======================================================================================================================

## OIDC Configuration
#%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/quarkus
#quarkus.oidc.client-id=backend-service
#quarkus.oidc.credentials.secret=secret
#quarkus.oidc.tls.verification=none
#
## Enable Policy Enforcement
#quarkus.keycloak.policy-enforcer.enable=true
#
## Tell Dev Services for Keycloak to import the realm file
## This property is not effective when running the application in JVM or native modes
#quarkus.keycloak.devservices.realm-path=quarkus-realm.json

# OIDC
# ------------

quarkus.oidc.client-id=smarty-plan-app
quarkus.oidc.credentials.secret=secret
quarkus.oidc.tls.verification=none
quarkus.oidc.authentication.scopes=openid,profile,email,roles
quarkus.oidc.authentication.user-info-required=true
quarkus.oidc.roles.source=accesstoken
quarkus.oidc.roles.role-claim-path=realm_access/roles
quarkus.oidc.application-type=hybrid
quarkus.oidc.logout.path=/logout
quarkus.oidc.logout.post-logout-path=/

# Prod
%prod.quarkus.oidc.auth-server-url=https://localhost:8543/realms/skillio
%prod.quarkus.oidc.tls.verification=required


#quarkus.keycloak.policy-enforcer.enable=true

# Admin client
# ------------
# Dev
%dev.quarkus.keycloak.admin-client.server-url=http://localhost:${kc.admin.port.test:45180}/
# Test
%test.quarkus.keycloak.admin-client.server-url=http://${KEYCLOAK_HOST:localhost}:${kc.admin.port.test:45181}/
# Functional
%functional.quarkus.keycloak.admin-client.server-url=http://${KEYCLOAK_HOST:localhost}:${kc.admin.port.test:45182}/

# Dev services
# ------------
quarkus.keycloak.devservices.realm-path=skillio-realm.json
# Dev
%dev.quarkus.keycloak.devservices.port=${kc.admin.port.test:45180}
# Test
%test.quarkus.keycloak.devservices.port=${kc.admin.port.test:45181}
# Functional
%functional.quarkus.keycloak.devservices.port=${kc.admin.port.test:45182}
PostG

