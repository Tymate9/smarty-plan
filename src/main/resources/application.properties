quarkus.live-reload.instrumentation=true
%test.quarkus.class-loading.parent-first-artifacts=io.qameta.allure:allure-java-commons
%functional.quarkus.class-loading.parent-first-artifacts=io.qameta.allure:allure-java-commons

quarkus.default-locale=fr_FR

# ======================================================================================================================
# Http Configuration
# ======================================================================================================================

quarkus.http.port=8080
%test.quarkus.http.port=8081
%functional.quarkus.http.port=8081

# ======================================================================================================================
# Database Configuration
# ======================================================================================================================

quarkus.datasource.db-kind=postgresql
quarkus.datasource.devservices.image-name=postgis/postgis

# Liquibase
# - - - - -
quarkus.liquibase.migrate-at-start=true
quarkus.liquibase.database-change-log-lock-table-name=database-changelog-lock
quarkus.liquibase.database-change-log-table-name=database-changelog

# Prod
%prod.quarkus.liquibase.contexts=prod
# Dev
%dev.quarkus.liquibase.contexts=dev
%dev.quarkus.liquibase.clean-at-start=false
# Test
%test.quarkus.liquibase.contexts=test
%test.quarkus.datasource.devservices.reuse=false

# ======================================================================================================================
#   Openapi
# ======================================================================================================================

# quarkus.swagger-ui.always-include=true
# quarkus.swagger-ui.path=/api/docs
# quarkus.smallrye-openapi.enable=true
# quarkus.smallrye-openapi.info-title=Smarty Plan API
# quarkus.smallrye-openapi.info-description=Rest API of the Smarty Plan platform
# quarkus.smallrye-openapi.info-version=1.0
#
# ##  Dev
# %dev.quarkus.smallrye-openapi.info-title=Smarty Plan API (Dev)
# ##  Test
# %test.quarkus.smallrye-openapi.info-title=Smarty Plan API (Test)

# ======================================================================================================================
#   Access Logs
# ======================================================================================================================
quarkus.http.access-log.enabled=true

# ======================================================================================================================
#   Keycloak
# ======================================================================================================================

# OIDC
# ------------
quarkus.log.category."io.quarkus.oidc".level=DEBUG
quarkus.oidc.client-id=smarty-plan-api
quarkus.oidc.credentials.secret=**********
quarkus.oidc.tls.verification=none
quarkus.oidc.token.audience=account
quarkus.oidc.authentication.scopes=openid,profile,email,roles
quarkus.oidc.authentication.user-info-required=false
quarkus.oidc.roles.source=accesstoken
quarkus.oidc.roles.role-claim-path=realm_access/roles
quarkus.oidc.application-type=hybrid
quarkus.oidc.token.issuer = http://localhost:45180/realms/NormandieManutention


#quarkus.keycloak.policy-enforcer.enable=true

# Admin client
# ------------
# Dev
%dev.quarkus.keycloak.admin-client.server-url=http://localhost:${kc.admin.port.test:45180}/
# Test
%test.quarkus.keycloak.admin-client.server-url=http://${KEYCLOAK_HOST:localhost}:${kc.admin.port.test:45181}/
# Functional
%functional.quarkus.keycloak.admin-client.server-url=http://${KEYCLOAK_HOST:localhost}:${kc.admin.port.test:45182}/

# Dev services
# ------------
quarkus.keycloak.devservices.realm-path=normandie-manutention-realm.json
# Dev
%dev.quarkus.keycloak.devservices.port=${kc.admin.port.test:45180}
# Test
%test.quarkus.keycloak.devservices.port=${kc.admin.port.test:45181}
# Functional
%functional.quarkus.keycloak.devservices.port=${kc.admin.port.test:45182}



# ======================================================================================================================
#   CORS enabled TODO(Vérifier avec Yoann si c'est ok)
# ======================================================================================================================

# Activer CORS
quarkus.http.cors=true

# Définir les origines autorisées
quarkus.http.cors.origins=http://localhost:4200

# Définir les méthodes HTTP autorisées
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS

# Définir les en-têtes HTTP autorisés
quarkus.http.cors.headers=Content-Type,Authorization

# Définir les en-têtes HTTP exposés
quarkus.http.cors.exposed-headers=Content-Type,Authorization
